{"version":3,"sources":["../../../../src/javascripts/login/auth.js"],"names":["auth","validateCredentials","event","preventDefault","login","document","getElementById","value","pass","undefined","user","validateLogin","validatePass","validateFail","usersList","getUsers","i","length","name","validateSuccess","alert","group","dataForAdmin","getDataForGroup","authAsAdmin","data","dataForUser","authAsUser","module","exports"],"mappings":"AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,OAAO;AACPC,yBAAqB,6BAAUC,KAAV,EAAiB;AAClCA,cAAMC,cAAN,GADkC,CACV;AACxB,YAAIC,QAAQC,SAASC,cAAT,CAAwB,OAAxB,EAAiCC,KAA7C;AACA,YAAIC,OAAOH,SAASC,cAAT,CAAwB,MAAxB,EAAgCC,KAA3C;;AAEA,YAAIH,UAAU,IAAV,IAAkBA,UAAUK,SAA5B,IAAyCD,SAAS,IAAlD,IAA0DA,SAASC,SAAvE,EAAkF;AAC9E,gBAAIC,OAAOC,cAAcP,KAAd,CAAX;AACA,gBAAIM,SAAS,IAAb,EAAmB;AACfE,6BAAaF,IAAb,EAAmBF,IAAnB;AACH,aAFD,MAEO;AACHK;AACH;AACJ;AACJ;AAdM,CAAX;;AAiBA,SAASF,aAAT,CAAuBP,KAAvB,EAA8B;AAC1B,QAAIU,YAAY,gBAAMC,QAAN,EAAhB;AACA,QAAIL,OAAO,IAAX;AACA,SAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAIF,UAAUG,MAA9B,EAAsCD,GAAtC,EAA2C;AACvC,YAAIZ,UAAUU,UAAUE,CAAV,EAAaE,IAA3B,EAAiC;AAC7BR,mBAAOI,UAAUE,CAAV,CAAP;AACA;AACH;AACJ;AACD,WAAON,IAAP;AACH;;AAED,SAASE,YAAT,CAAsBF,IAAtB,EAA4BF,IAA5B,EAAkC;AAC9B,QAAIA,SAASE,KAAKF,IAAlB,EAAwB;AACpBW,wBAAgBT,IAAhB;AACH,KAFD,MAEO;AACHG;AACH;AACJ;;AAED,SAASA,YAAT,GAAwB;AACpBO,UAAM,uCAAN;AACAf,aAASC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,GAAyC,EAAzC;AACAF,aAASC,cAAT,CAAwB,MAAxB,EAAgCC,KAAhC,GAAwC,EAAxC;AACH;;AAED,SAASY,eAAT,CAAyBT,IAAzB,EAA+B;AAC3B,QAAIA,KAAKW,KAAL,KAAe,OAAnB,EAA4B;AACxB,YAAIC,eAAe,uBAASC,eAAT,CAAyBb,KAAKW,KAA9B,CAAnB;AACA,4BAAUG,WAAV,CAAsBd,IAAtB,EAA4BY,aAAaG,IAAzC;AACH,KAHD,MAGO,IAAIf,KAAKW,KAAL,KAAe,QAAnB,EAA6B;AAChC,YAAIK,cAAc,uBAASH,eAAT,CAAyBb,KAAKW,KAA9B,CAAlB;AACA,2BAASM,UAAT,CAAoBjB,IAApB,EAA0BgB,YAAYD,IAAtC;AACH;AACJ;;AAGDG,OAAOC,OAAP,GAAiB7B,IAAjB","file":"auth.js","sourcesContent":["'use strict';\r\nimport users from '../data/users.js';\r\nimport adminRole from '../admin/adminAuth';\r\nimport userRole from '../quiz/userAuth';\r\nimport renderer from '../pageRenderer';\r\n\r\nvar auth = {\r\n    validateCredentials: function (event) {\r\n        event.preventDefault(); //prevent page from reloading\r\n        var login = document.getElementById(\"login\").value;\r\n        var pass = document.getElementById(\"pass\").value;\r\n\r\n        if (login !== null && login !== undefined && pass !== null && pass !== undefined) {\r\n            var user = validateLogin(login);\r\n            if (user !== null) {\r\n                validatePass(user, pass);\r\n            } else {\r\n                validateFail();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nfunction validateLogin(login) {\r\n    var usersList = users.getUsers();\r\n    var user = null;\r\n    for (var i = 0; i < usersList.length; i++) {\r\n        if (login === usersList[i].name) {\r\n            user = usersList[i];\r\n            break;\r\n        }\r\n    }\r\n    return user;\r\n}\r\n\r\nfunction validatePass(user, pass) {\r\n    if (pass === user.pass) {\r\n        validateSuccess(user);\r\n    } else {\r\n        validateFail();\r\n    }\r\n}\r\n\r\nfunction validateFail() {\r\n    alert(\"Problems during logging in. Try again\");\r\n    document.getElementById(\"login\").value = \"\";\r\n    document.getElementById(\"pass\").value = \"\";\r\n}\r\n\r\nfunction validateSuccess(user) {\r\n    if (user.group === 'admin') {\r\n        var dataForAdmin = renderer.getDataForGroup(user.group);\r\n        adminRole.authAsAdmin(user, dataForAdmin.data);\r\n    } else if (user.group === 'client') {\r\n        var dataForUser = renderer.getDataForGroup(user.group);\r\n        userRole.authAsUser(user, dataForUser.data);\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = auth;"]}