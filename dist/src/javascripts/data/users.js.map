{"version":3,"sources":["../../../../src/javascripts/data/users.js"],"names":["setUsers","list","parsedList","JSON","stringify","localStorage","setItem","getUsers","users","getItem","parse","getMaxId","result","map","a","id","Math","max","apply","addUser","user","maxId","push","removeUser","userId","listWithoutUser","grep","e","parseInt","console","log","length","initData","usersList","module","exports"],"mappings":"AAAA;;AACA;;;;;;AAEA,IAAIA,WAAW,SAAXA,QAAW,CAACC,IAAD,EAAU;AACrB,QAAIC,aAAaC,KAAKC,SAAL,CAAeH,IAAf,CAAjB;AACAI,iBAAaC,OAAb,CAAqB,UAArB,EAAiCJ,UAAjC;AACH,CAHD;;AAKA,SAASK,QAAT,GAAoB;AAChB,QAAIC,QAAQH,aAAaI,OAAb,CAAqB,UAArB,CAAZ;AACA,WAAON,KAAKO,KAAL,CAAWF,KAAX,CAAP;AACH;;AAED,IAAIG,WAAW,SAAXA,QAAW,CAACV,IAAD,EAAU;AACrB,QAAIW,SAASX,KAAKY,GAAL,CAAS,UAACC,CAAD,EAAO;AACzB,eAAOA,EAAEC,EAAT;AACH,KAFY,CAAb;AAGA,WAAOC,KAAKC,GAAL,CAASC,KAAT,CAAe,IAAf,EAAqBN,MAArB,CAAP;AACH,CALD;;AAOA,IAAIO,UAAU,SAAVA,OAAU,CAACC,IAAD,EAAU;AACpB,QAAIZ,QAAQD,UAAZ;AACA,QAAIc,QAAQV,SAASH,KAAT,CAAZ;AACAY,SAAKL,EAAL,GAAU,EAAEM,KAAZ;AACAb,UAAMc,IAAN,CAAWF,IAAX;AACApB,aAASQ,KAAT;AACH,CAND;;AAQA,IAAIe,aAAa,SAAbA,UAAa,CAACC,MAAD,EAAY;AACzB,QAAIhB,QAAQD,UAAZ;AACA,QAAIkB,kBAAkB,iBAAEC,IAAF,CAAOlB,KAAP,EAAc,UAACmB,CAAD,EAAO;AACvC,eAAOA,EAAEZ,EAAF,KAASa,SAASJ,MAAT,CAAhB;AACH,KAFqB,CAAtB;AAGAK,YAAQC,GAAR,CAAYL,eAAZ;AACA,QAAIA,gBAAgBM,MAAhB,KAA4BvB,MAAMuB,MAAN,GAAa,CAA7C,EAAiD;AAC7C/B,iBAASyB,eAAT;AACA,eAAO,CAAP;AACH,KAHD,MAGO;AACH,eAAO,CAAP;AACH;AACJ,CAZD;;AAcA,IAAIO,WAAW,SAAXA,QAAW,GAAM;AACjB,QAAIC,YAAY,CAAC;AACb,cAAM,CADO;AAEb,gBAAQ,MAFK;AAGb,gBAAQ,MAHK;AAIb,kBAAU,SAJG;AAKb,qBAAa,EALA;AAMb,iBAAS;AANI,KAAD,EAOb;AACC,cAAM,CADP;AAEC,gBAAQ,OAFT;AAGC,gBAAQ,OAHT;AAIC,kBAAU,WAJX;AAKC,qBAAa,EALd;AAMC,iBAAS;AANV,KAPa,CAAhB;AAgBAjC,aAASiC,SAAT;AACH,CAlBD;;AAoBAC,OAAOC,OAAP,GAAiB;AACb5B,sBADa;AAEbY,oBAFa;AAGbnB,sBAHa;AAIbgC,sBAJa;AAKbT;AALa,CAAjB","file":"users.js","sourcesContent":["\"use strict\";\r\nimport $ from 'jquery';\r\n\r\nlet setUsers = (list) => {\r\n    let parsedList = JSON.stringify(list);\r\n    localStorage.setItem('userList', parsedList);\r\n};\r\n\r\nfunction getUsers() {\r\n    let users = localStorage.getItem('userList');\r\n    return JSON.parse(users);\r\n}\r\n\r\nlet getMaxId = (list) => {\r\n    let result = list.map((a) => {\r\n        return a.id;\r\n    });\r\n    return Math.max.apply(null, result);\r\n};\r\n\r\nlet addUser = (user) => {\r\n    let users = getUsers();\r\n    let maxId = getMaxId(users);\r\n    user.id = ++maxId;\r\n    users.push(user);\r\n    setUsers(users);\r\n};\r\n\r\nlet removeUser = (userId) => {\r\n    let users = getUsers();\r\n    let listWithoutUser = $.grep(users, (e) => {\r\n        return e.id !== parseInt(userId);\r\n    });\r\n    console.log(listWithoutUser);\r\n    if (listWithoutUser.length === (users.length-1)) {\r\n        setUsers(listWithoutUser);\r\n        return 1;\r\n    } else {\r\n        return 0;\r\n    }\r\n};\r\n\r\nlet initData = () => {\r\n    let usersList = [{\r\n        \"id\": 0,\r\n        \"name\": \"user\",\r\n        \"pass\": \"user\",\r\n        \"access\": \"limited\",\r\n        \"lastVisit\": \"\",\r\n        \"group\": 'client'\r\n    }, {\r\n        \"id\": 1,\r\n        \"name\": \"admin\",\r\n        \"pass\": \"admin\",\r\n        \"access\": \"unlimited\",\r\n        \"lastVisit\": \"\",\r\n        \"group\": 'admin'\r\n    }\r\n    ];\r\n    setUsers(usersList);\r\n};\r\n\r\nmodule.exports = {\r\n    getUsers,\r\n    addUser,\r\n    setUsers,\r\n    initData,\r\n    removeUser,\r\n};"]}